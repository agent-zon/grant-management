# yaml-language-server: $schema=./values.schema.json

global:
  domain: c-127c9ef.stage.kyma.ondemand.com
  host: agent-identity-proxy
  imagePullSecret:
    name: docker-registry
  image:
    registry: scai-dev.common.repositories.cloud.sap
    tag: latest
  imagePullPolicy: Always

proxy:
  fullnameOverride: agent-identity-proxy
  image:
    repository: agent-identity-proxy
  runAsUser: 1001
  bindings:
    auth:
      serviceInstanceName: identity
      parameters:
        credential-type: X509_GENERATED
        app-identifier: agent-identity-proxy
  resources:
    limits:
      ephemeral-storage: 1G
      memory: 500M
    requests:
      ephemeral-storage: 512M
      cpu: 250m
      memory: 256M
  health:
    liveness:
      path: /health
    readiness:
      path: /health
  networkSecurity:
    allowNamespaceInternal: true
  expose:
    enabled: true
    corsPolicy:
      allowOrigins:
        - regex: ".*"
      allowMethods:
        - "GET"
        - "POST"
        - "PUT"
        - "DELETE"
        - "OPTIONS"
        - "PATCH"
        - "HEAD"
      allowHeaders:
        - "*"
      allowCredentials: true
  env:
    - name: NODE_ENV
      value: "production"
    # Centralized URL configuration
    - name: GRANT_MANAGEMENT_HOST
      value: "https://grant-management-srv-tomer-dev.c-127c9ef.stage.kyma.ondemand.com"
    - name: GRANTS_PATH_PREFIX
      value: "/grants-management"
    - name: OAUTH_SERVER_SRV
      value: "https://grant-management-srv-tomer-dev.c-127c9ef.stage.kyma.ondemand.com"
    - name: APP_ROUTER_BASE
      value: "https://grant-management-approuter-tomer-dev.c-127c9ef.stage.kyma.ondemand.com"
    - name: LOG_LEVEL
      value: "info"
    - name: DEFAULT_UPSTREAM_MCP_URL
      value: "https://adminmcp-dev.c-127c9ef.stage.kyma.ondemand.com"

identity:
  serviceOfferingName: identity
  servicePlanName: application
  parameters:
    name: "{{ .Release.Name }}-{{ .Release.Namespace }}"
    display-name: "Agent Agentity Proxy ({{ .Release.Name }})"
    description: Identity service for Agent Agentity Proxy
    multi-tenant: false
